---
title: SqlAlchemyExecutionEngine
sidebar_label: SqlAlchemyExecutionEngine
---
import CodeBlock from '@theme/CodeBlock';

<section class="sphinx-api-doc" id="sqlalchemyexecutionengine">

<dl class="py class">
<dt class="sig sig-object py" id="great_expectations.execution_engine.SqlAlchemyExecutionEngine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">great_expectations.execution_engine.</span></span><span class="sig-name descname"><span class="pre">SqlAlchemyExecutionEngine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">credentials</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_context</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">SaEngine</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection_string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_data_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_temp_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">ConcurrencyConfig</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#great_expectations.execution_engine.SqlAlchemyExecutionEngine" title="Permalink to this definition">#</a>
</dt>
<dd>
<p>SparkDFExecutionEngine instantiates the ExecutionEngine API to support computations using Spark platform.</p>
<p>Constructor builds a SqlAlchemyExecutionEngine, using a provided connection string/url/engine/credentials to     access the desired database.</p>
<p>Also initializes the dialect to be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The name of the SqlAlchemyExecutionEngine</p></li>
<li><p><strong>credentials</strong> – If the Execution Engine is not provided, the credentials can be used to build the             ExecutionEngine object. If the Engine is provided, it will be used instead.</p></li>
<li><p><strong>data_context</strong> (<em>DataContext</em>) – An object representing a Great Expectations project that can be used to             access ExpectationSuite objects and the Project Data itself.</p></li>
<li><p><strong>engine</strong> (<em>Engine</em>) – A SqlAlchemy Engine used to set the SqlAlchemyExecutionEngine being configured,             useful if an Engine has already been configured and should be reused. Will override Credentials if             provided. If you are passing an engine that requires a single connection e.g. if temporary tables are             not persisted if the connection is closed (e.g. sqlite, mssql) then you should create the engine with             a StaticPool e.g. engine = sa.create_engine(connection_url, poolclass=sa.pool.StaticPool)</p></li>
<li><p><strong>connection_string</strong> (<em>string</em>) – If neither the engines nor the credentials have been provided, a             connection string can be used to access the data. This will be overridden by both the engine and             credentials if those are provided.</p></li>
<li><p><strong>url</strong> (<em>string</em>) – If neither the engines, the credentials, nor the connection_string have been provided, a             URL can be used to access the data. This will be overridden by all other configuration options if             any are provided.</p></li>
<li><p><strong>concurrency</strong> (<em>ConcurrencyConfig</em>) – Concurrency config used to configure the sqlalchemy engine.</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – These will be passed as optional parameters to the SQLAlchemy engine, <strong>not</strong> the ExecutionEngine</p></li>
</ul>
</dd>
</dl>
<p>For example:</p>
<CodeBlock language="python">{`    execution_engine: ExecutionEngine = SqlAlchemyExecutionEngine(connection_string="dbmstype://user:password@host:5432/database_name")`}</CodeBlock>
<dl class="py method">
<dt class="sig sig-object py" id="great_expectations.execution_engine.SqlAlchemyExecutionEngine.execute_query">
<span class="sig-name descname"><span class="pre">execute_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">sqlalchemy.sql.selectable.Selectable</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">sqlalchemy.engine.cursor.CursorResult</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">sqlalchemy.engine.cursor.LegacyCursorResult</span></span></span><a class="headerlink" href="#great_expectations.execution_engine.SqlAlchemyExecutionEngine.execute_query" title="Permalink to this definition">#</a>
</dt>
<dd>
<p>Execute a query using the underlying database engine.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.16.14.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd">
<p><strong>query</strong> – Sqlalchemy selectable query.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even">
<p>CursorResult for sqlalchemy 2.0+ or LegacyCursorResult for earlier versions.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="great_expectations.execution_engine.SqlAlchemyExecutionEngine.execute_query_in_transaction">
<span class="sig-name descname"><span class="pre">execute_query_in_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">sqlalchemy.sql.selectable.Selectable</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">sqlalchemy.engine.cursor.CursorResult</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">sqlalchemy.engine.cursor.LegacyCursorResult</span></span></span><a class="headerlink" href="#great_expectations.execution_engine.SqlAlchemyExecutionEngine.execute_query_in_transaction" title="Permalink to this definition">#</a>
</dt>
<dd>
<p>Execute a query using the underlying database engine within a transaction that will auto commit.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.16.14.</span></p>
</div>
<p>Begin once: <a class="reference external" href="https://docs.sqlalchemy.org/en/20/core/connections.html#begin-once">Connections.Html</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd">
<p><strong>query</strong> – Sqlalchemy selectable query.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even">
<p>CursorResult for sqlalchemy 2.0+ or LegacyCursorResult for earlier versions.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="great_expectations.execution_engine.SqlAlchemyExecutionEngine.get_compute_domain">
<span class="sig-name descname"><span class="pre">get_compute_domain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domain_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="/docs/0.18/reference/api/core/metric_domain_types/MetricDomainTypes_class" title="great_expectations.core.metric_domain_types.MetricDomainTypes"><span class="pre">great_expectations.core.metric_domain_types.MetricDomainTypes</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accessor_keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">sqlalchemy.sql.selectable.Selectable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#great_expectations.execution_engine.SqlAlchemyExecutionEngine.get_compute_domain" title="Permalink to this definition">#</a>
</dt>
<dd>
<p>Uses a given batch dictionary and Domain kwargs to obtain a SqlAlchemy column object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>domain_kwargs</strong> (<em>dict</em>) – a dictionary consisting of the Domain kwargs specifying which data to obtain</p></li>
<li><p><strong>domain_type</strong> (<em>str</em><em> or </em><a class="reference internal" href="/docs/0.18/reference/api/core/metric_domain_types/MetricDomainTypes_class" title="great_expectations.core.metric_domain_types.MetricDomainTypes"><em>MetricDomainTypes</em></a>) – an Enum value indicating which metric Domain the user would like             to be using, or a corresponding string value representing it.  String types include "identity", "column",             "column_pair", "table" and "other".  Enum types include capitalized versions of these from the class             MetricDomainTypes.</p></li>
<li><p><strong>accessor_keys</strong> (<em>str iterable</em>) – keys that are part of the compute Domain but should be ignored when             describing the Domain and simply transferred with their associated values into accessor_domain_kwargs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even">
<p>SqlAlchemy column</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="great_expectations.execution_engine.SqlAlchemyExecutionEngine.get_domain_records">
<span class="sig-name descname"><span class="pre">get_domain_records</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domain_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">sqlalchemy.sql.selectable.Selectable</span></span></span><a class="headerlink" href="#great_expectations.execution_engine.SqlAlchemyExecutionEngine.get_domain_records" title="Permalink to this definition">#</a>
</dt>
<dd>
<p>Uses the given Domain kwargs (which include row_condition, condition_parser, and ignore_row_if directives) to obtain and/or query a Batch of data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd">
<p><strong>domain_kwargs</strong> (<em>dict</em>) – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even">
<p>An SqlAlchemy table/column(s) (the selectable object for obtaining data on which to compute returned in the format of an SqlAlchemy table/column(s) object)</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
</section>